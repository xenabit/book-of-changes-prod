var y=Object.defineProperty;var x=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var p=(t,r,a)=>r in t?y(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,v=(t,r)=>{for(var a in r||(r={}))S.call(r,a)&&p(t,a,r[a]);if(x)for(var a of x(r))E.call(r,a)&&p(t,a,r[a]);return t};var j=(t,r,a)=>new Promise((h,f)=>{var _=n=>{try{d(a.next(n))}catch(c){f(c)}},g=n=>{try{d(a.throw(n))}catch(c){f(c)}},d=n=>n.done?h(n.value):Promise.resolve(n.value).then(_,g);d((a=a.apply(t,r)).next())});import{j as e}from"./framerMotion-BlHqZyD2.js";import{r as i,u as k,d as q}from"./vendor-J-xba_WQ.js";const m=t=>i.createElement("svg",v({width:"1em",height:"1em",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i.createElement("path",{d:"M0.5 8.5C5.31005 8.5 9 4.81005 9 0C9 4.81005 12.6899 8.5 17.5 8.5C12.6899 8.5 9 12.1899 9 17C9 12.1899 5.31005 8.5 0.5 8.5Z",fill:"#838BA1"})),H="/assets/images/header-logo.svg",B="/assets/images/header-share.svg",N="_Header_qwfwe_2",T="_hidden_qwfwe_13",A="_filled_qwfwe_16",$="_active_qwfwe_20",I="_Header__toggle_qwfwe_20",Y="_Header__share_qwfwe_43",L="_Header__logomob_qwfwe_44",R="_Header__menu_qwfwe_79",z="_Header__logo_qwfwe_44",l={Header:N,hidden:T,filled:A,active:$,Header__toggle:I,Header__share:Y,Header__logomob:L,Header__menu:R,Header__logo:z};function M(){const[t,r]=i.useState(!1),[a,h]=i.useState(!0),[f,_]=i.useState(!0),g=i.useRef(0),d=k(),n=q();i.useEffect(()=>{if(n.hash){const o=n.hash.substring(1),s=document.getElementById(o);if(s){const w=s.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:w-80,behavior:"smooth"})}}},[n.hash]),i.useEffect(()=>{const o=()=>{const s=window.scrollY;s>72?_(!1):_(!0),t?(h(!0),_(!1)):s>g.current&&s>500?h(!1):s<g.current&&h(!0),g.current=s};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[t]);const c=i.useCallback(o=>{o.preventDefault();const s=o.currentTarget.getAttribute("href");if(s.startsWith("#")){const u=s.substring(1);if(r(!1),n.pathname==="/information")d(`/#${u}`);else{const w=document.getElementById(u);if(w){const C=w.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:C-80,behavior:"smooth"})}}}},[n.pathname,d]),b=i.useCallback(o=>j(this,null,function*(){o.preventDefault();const s={title:"Книга Перемен",text:"Узнайте больше о Книге Перемен и ее толкованиях!",url:window.location.origin};try{navigator.share&&navigator.canShare&&navigator.canShare(s)?yield navigator.share(s):(yield navigator.clipboard.writeText(s.url),alert("Ссылка скопирована в буфер обмена!"))}catch(u){yield navigator.clipboard.writeText(s.url),alert("Ссылка скопирована в буфер обмена!")}}),[]);return e.jsx("header",{className:`${l.Header} ${t?l.active:""} ${a?"":l.hidden} ${f?"":l.filled}`,children:e.jsxs("div",{className:l.Header__menu,children:[e.jsx("button",{type:"button",className:l.Header__share,onClick:b,"aria-label":"Поделиться страницей",children:e.jsx("img",{src:B,width:"20",height:"20",alt:"Иконка поделиться",loading:"lazy"})}),e.jsx("nav",{role:"navigation","aria-label":"Основная навигация",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("a",{href:"#anchorhexagrams",onClick:c,"aria-current":window.location.hash==="#anchorhexagrams"?"page":void 0,children:[e.jsx("span",{children:"толкование"}),e.jsx(m,{"aria-hidden":"true"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"#anchorhistory",onClick:c,"aria-current":window.location.hash==="#anchorhistory"?"page":void 0,children:[e.jsx("span",{children:"история"}),e.jsx(m,{"aria-hidden":"true"})]})}),e.jsx("li",{className:l.Header__logo,children:e.jsx("a",{href:"/","aria-label":"На главную страницу",children:e.jsx("img",{width:"24",height:"24",src:H,alt:"Логотип Книги Перемен",loading:"lazy"})})}),e.jsx("li",{children:e.jsxs("a",{href:"#anchorauthors",onClick:c,"aria-current":window.location.hash==="#anchorauthors"?"page":void 0,children:[e.jsx("span",{children:"авторы"}),e.jsx(m,{"aria-hidden":"true"})]})}),e.jsx("li",{children:e.jsxs("a",{href:"#anchorapp",onClick:c,"aria-current":window.location.hash==="#anchorapp"?"page":void 0,children:[e.jsx("span",{children:"приложение"}),e.jsx(m,{"aria-hidden":"true"})]})})]})}),e.jsx("a",{className:l.Header__logomob,href:"/","aria-label":"На главную страницу (мобильная версия)",children:e.jsx("img",{width:"24",height:"24",src:H,alt:"Логотип LABA",loading:"lazy"})}),e.jsxs("button",{type:"button",className:l.Header__toggle,onClick:()=>r(o=>!o),"aria-label":"Открыть/закрыть меню","aria-expanded":t,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})})}export{M as default};
